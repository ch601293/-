<template>
    <n-card>
      <div id="header">
        <div class="logo">
          <n-icon size="60">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              version="1.1"
              id="Layer_1"
              x="0px"
              y="0px"
              width="5%"
              viewBox="0 0 1024 1024"
              enable-background="new 0 0 1024 1024"
              xml:space="preserve"
            >
              <path
                d=" M368.668457,439.412109   C336.083435,420.985748 309.819946,396.454712 290.562134,364.659607   C280.135223,347.444489 273.750977,328.891235 272.594086,308.671692   C272.432953,305.855652 271.883545,303.061188 271.737762,300.245117   C271.573151,297.064331 272.348206,294.078644 275.719238,292.943878   C278.826233,291.897919 281.183105,293.617645 283.087708,295.937439   C286.682007,300.315399 290.125610,304.822144 293.831299,309.102722   C325.983795,346.243896 366.334076,371.399719 411.453522,389.652557   C439.306641,400.920410 468.420624,408.132111 497.088898,416.788696   C505.055420,419.194275 512.973572,421.770721 520.857849,424.434479   C526.651245,426.391815 527.621033,425.891479 527.665527,419.737915   C527.817871,398.672241 532.294434,378.742310 543.571899,360.735931   C559.878174,334.700165 582.921387,318.736542 613.704590,314.620941   C647.615601,310.087189 675.953369,321.222198 699.560669,345.351166   C702.019592,347.864471 704.467041,348.782593 707.867981,348.760040   C719.030884,348.685913 730.195801,348.883942 741.359680,348.997253   C742.522827,349.009064 743.707947,349.035797 744.841919,349.261536   C746.936035,349.678375 749.383057,349.809174 750.158081,352.301514   C750.992249,354.984253 748.688782,356.167816 747.057617,357.457092   C738.563965,364.170349 729.976135,370.746490 722.303040,378.448425   C701.596436,399.233032 693.586060,424.186005 697.037598,453.166901   C699.083069,470.341064 701.811340,487.511688 701.192810,504.868561   C699.424866,554.481384 683.446350,598.816223 650.479065,636.314758   C613.033630,678.907043 565.583679,704.112305 510.335938,715.381042   C471.399780,723.322876 432.076263,726.939270 392.351898,727.586365   C366.018921,728.015137 339.712402,727.948914 313.394928,727.341431   C312.562195,727.322205 311.713928,727.380066 310.900574,727.240601   C309.085602,726.929504 307.022125,726.638123 306.644836,724.440613   C306.232697,722.040039 308.347778,721.451294 310.023041,720.794067   C316.998383,718.057861 324.045685,715.500366 330.980286,712.666138   C364.558472,698.942749 394.528534,679.773621 419.593781,653.354065   C422.152161,650.657471 424.200928,651.177429 427.016907,652.481873   C447.761902,662.091003 469.546021,666.911133 492.436890,665.540405   C526.312012,663.512024 557.275635,652.592712 585.144836,633.369141   C619.428467,609.721008 643.998047,578.255920 659.185974,539.437744   C667.730225,517.600037 670.972290,494.818359 671.561951,471.572357   C671.966858,455.610809 670.982788,439.566498 674.601379,423.825989   C678.647156,406.227081 687.646484,391.549011 701.089539,379.550629   C701.686890,379.017487 702.284729,378.484955 702.934692,377.905426   C702.523254,377.310760 702.338501,376.793091 701.971680,376.549530   C681.910217,363.228180 659.894958,356.774902 636.023438,360.939331   C608.631836,365.717804 592.351807,383.612732 584.311401,409.460999   C579.257202,425.709320 580.019653,442.330109 582.790100,458.859406   C587.236572,485.389008 587.556335,511.572113 576.277100,536.686279   C556.803284,580.046570 523.138306,604.543884 476.278839,611.466248   C449.060822,615.486938 423.121887,611.692261 398.701355,599.049500   C380.445343,589.598267 366.078369,575.573303 354.100464,559.009888   C353.419403,558.068054 352.858856,557.034729 352.287842,556.018372   C350.202606,552.306763 349.969604,548.645813 353.192566,545.487061   C356.422699,542.321289 359.874329,543.556274 363.268768,545.413635   C368.526642,548.290527 373.728882,551.284668 379.096771,553.942078   C399.876190,564.229187 421.976349,569.014954 445.081055,569.723938   C465.577698,570.353027 485.631378,568.248291 504.848602,560.662781   C518.633179,555.221680 530.962769,547.409912 541.860413,537.358704   C542.714905,536.570618 543.499146,535.696289 544.237732,534.797729   C544.522583,534.451172 544.588989,533.925171 544.784302,533.402344   C542.337341,531.469971 539.512695,531.477844 536.689148,531.349731   C520.061035,530.595154 503.846649,533.556641 487.681061,536.842896   C445.631104,545.391296 405.346741,540.693481 367.992737,519.119873   C339.464996,502.643921 317.938904,479.073090 303.459015,449.306244   C302.587219,447.514069 301.842072,445.648407 301.186066,443.765350   C299.172882,437.986359 300.048279,433.375916 303.624298,431.194580   C308.483337,428.230530 311.889435,431.317566 315.061127,434.318787   C325.269714,443.978607 336.554840,452.202515 348.241821,459.952515   C375.893066,478.288879 406.040833,490.043427 438.957123,494.391083   C458.075104,496.916199 477.179504,495.619629 496.239929,493.329010   C504.506958,492.335480 512.780579,491.439148 521.134216,491.630951   C522.911560,491.671814 524.816895,492.074707 526.712952,490.578278   C525.991577,488.116302 523.609741,487.412537 521.758484,486.332611   C506.971161,477.706116 490.645691,473.931396 473.952637,471.346039   C441.810547,466.367981 409.963989,460.311188 380.529114,445.538544   C376.662079,443.597809 372.841583,441.564301 368.668457,439.412109  z"
              />
              <path
                d=" M521.000000,729.889648   C548.488281,729.677979 575.466370,730.349182 602.402527,731.837769   C622.647827,732.956665 642.928833,734.141541 662.949646,737.707642   C665.561707,738.172913 669.535889,737.887878 669.569641,741.555664   C669.602417,745.128845 665.680176,745.096069 663.048767,745.721680   C651.020203,748.581177 638.699707,749.343384 626.438232,750.169861   C579.227966,753.351807 531.951111,754.673157 484.637268,754.095886   C455.499664,753.740417 426.396515,752.197998 397.334290,750.140198   C386.080383,749.343384 374.771851,748.486389 363.699493,746.136902   C360.768555,745.515015 355.784454,745.953857 356.138824,741.480103   C356.434937,737.741455 361.017365,738.107971 363.993530,737.781250   C394.271576,734.457520 424.682251,733.108887 455.087280,731.526245   C476.889526,730.391418 498.680969,729.846863 521.000000,729.889648  z"
              />
              <path
                d=" M647.890381,400.016479   C643.145874,403.120789 638.526428,403.765198 634.185120,400.377228   C629.992371,397.105194 627.930847,392.561890 628.963867,387.212830   C629.918274,382.270752 632.898926,378.682648 638.048462,377.833588   C643.288452,376.969635 647.962769,378.346161 651.113892,383.025146   C654.189636,387.592163 654.115356,392.568909 650.922852,396.925232   C650.148865,397.981232 649.110901,398.843750 647.890381,400.016479  z"
              />
            </svg>
          </n-icon>
          <p class="name">中国鸟类观测数据网站</p>
        </div>
        <div class="right">
          <slot></slot>
          <n-button @click="backHome" strong icon-placement="left" size="large">
            <template #icon>
              <n-icon size="25">
                <svg
                  t="1706529082991"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="886"
                  width="200"
                  height="200"
                >
                  <path
                    d="M923.733 394.667C838.4 324.267 716.8 219.733 561.067 85.333c-27.734-23.466-70.4-23.466-98.134 0C307.2 219.733 185.6 324.267 100.267 394.667 85.333 409.6 74.667 428.8 74.667 448c0 38.4 32 70.4 70.4 70.4H192v358.4c0 29.867 23.467 53.333 53.333 53.333h160c29.867 0 53.334-23.466 53.334-53.333V669.867h106.666V876.8c0 29.867 23.467 53.333 53.334 53.333h160c29.866 0 53.333-23.466 53.333-53.333V518.4h46.933c38.4 0 70.4-32 70.4-70.4 0-21.333-10.666-40.533-25.6-53.333z m-44.8 59.733h-57.6c-29.866 0-53.333 23.467-53.333 53.333v358.4H629.333v-204.8C629.333 631.467 605.867 608 576 608H448c-29.867 0-53.333 23.467-53.333 53.333v206.934H256V507.733c0-29.866-23.467-53.333-53.333-53.333h-57.6c-4.267 0-6.4-2.133-6.4-6.4 0-2.133 2.133-4.267 2.133-6.4 85.333-70.4 206.933-174.933 362.667-309.333 4.266-4.267 10.666-4.267 14.933 0C674.133 266.667 795.733 371.2 881.067 441.6c2.133 2.133 2.133 2.133 2.133 4.267 2.133 6.4-2.133 8.533-4.267 8.533z"
                    p-id="887"
                  ></path>
                </svg>
              </n-icon>
            </template>
            首页</n-button
          >

          <n-dropdown :options="options" size="huge" @select="handleSelect">
            <n-button
              icon-placement="left"
              strong
              @click="tologin"
              size="large"
            >
              <template #icon>
                <n-icon size="25">
                  <svg
                    t="1706529101784"
                    class="icon"
                    viewBox="0 0 1024 1024"
                    version="1.1"
                    xmlns="http://www.w3.org/2000/svg"
                    p-id="1032"
                    width="200"
                    height="200"
                  >
                    <path
                      d="M512 74.667C270.933 74.667 74.667 270.933 74.667 512S270.933 949.333 512 949.333 949.333 753.067 949.333 512 753.067 74.667 512 74.667z m-224 736c0-123.734 100.267-224 224-224s224 100.266 224 224c-61.867 46.933-140.8 74.666-224 74.666S349.867 857.6 288 810.667z m128-384c0-53.334 42.667-96 96-96s96 42.666 96 96-42.667 96-96 96-96-42.667-96-96zM793.6 755.2c-19.2-96-85.333-174.933-174.933-211.2 32-29.867 51.2-70.4 51.2-117.333 0-87.467-72.534-160-160-160s-160 72.533-160 160c0 46.933 19.2 87.466 51.2 117.333-89.6 36.267-155.734 115.2-174.934 211.2C170.667 689.067 134.4 605.867 134.4 512c0-204.8 168.533-373.333 373.333-373.333S885.333 307.2 885.333 512c0 93.867-34.133 177.067-91.733 243.2z"
                      p-id="1033"
                    ></path>
                  </svg>
                </n-icon>
              </template>
              个人中心
            </n-button>
          </n-dropdown>
        </div>
      </div>
    </n-card>
</template>

<script setup>
import { NIcon } from "naive-ui";
import { NConfigProvider, NCard, NButton, NDropdown } from "naive-ui";
import { useRouter } from "vue-router";
import { ref, h } from 'vue'
const router = useRouter();
function tologin() {
  router.push("/login");
}
function backHome() {
  router.push("/");
}
//通用的返回嵌套的svg虚拟dom节点
const svgParseVDomNode = (svgCode) => {
  // 使用 DOMParser 解析SVG代码字符串并创建一个DOM对象
  const parser = new DOMParser();
  const svgDocument = parser.parseFromString(svgCode, "image/svg+xml");

  // 递归函数，用于创建嵌套的虚拟DOM元素
  const createVirtualDOM = (element) => {
    // 将 attributes 对象转换为属性键值对
    let attrs = {};
    for (let i = 0; i < element.attributes.length; i++) {
      attrs[element.attributes[i].name] = element.attributes[i].value;
    }

    // 获取元素的子元素
    const children = Array.from(element.childNodes).filter(node => node.nodeType === 1);

    // 如果没有子节点，则直接返回虚拟DOM元素
    if (children.length === 0) {
      return h(element.tagName, attrs);
    }

    // 递归创建子元素的虚拟DOM
    let virtualChildren = children.map(child => createVirtualDOM(child));

    return h(element.tagName, attrs, virtualChildren);
  };

  // 获取根SVG元素并使用递归函数创建虚拟DOM元素
  const svgRootElement = svgDocument.documentElement;
  const virtualDOMElement = createVirtualDOM(svgRootElement);
  return virtualDOMElement;
};
const UserIcon = `<svg t="1706534130098" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3730" width="200" height="200"><path d="M512 74.666667C270.933333 74.666667 74.666667 270.933333 74.666667 512S270.933333 949.333333 512 949.333333 949.333333 753.066667 949.333333 512 753.066667 74.666667 512 74.666667zM288 810.666667c0-123.733333 100.266667-224 224-224S736 686.933333 736 810.666667c-61.866667 46.933333-140.8 74.666667-224 74.666666s-162.133333-27.733333-224-74.666666z m128-384c0-53.333333 42.666667-96 96-96s96 42.666667 96 96-42.666667 96-96 96-96-42.666667-96-96z m377.6 328.533333c-19.2-96-85.333333-174.933333-174.933333-211.2 32-29.866667 51.2-70.4 51.2-117.333333 0-87.466667-72.533333-160-160-160s-160 72.533333-160 160c0 46.933333 19.2 87.466667 51.2 117.333333-89.6 36.266667-155.733333 115.2-174.933334 211.2-55.466667-66.133333-91.733333-149.333333-91.733333-243.2 0-204.8 168.533333-373.333333 373.333333-373.333333S885.333333 307.2 885.333333 512c0 93.866667-34.133333 177.066667-91.733333 243.2z" fill="#2c2c2c" p-id="3731"></path></svg>` ;
const LogoutIcon = `<svg t="1706531649268" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3373" width="200" height="200"><path d="M919.466667 488.533333l-149.333334-149.333333c-12.8-12.8-32-12.8-44.8 0-12.8 12.8-12.8 32 0 44.8l93.866667 93.866667H522.666667c-17.066667 0-32 14.933333-32 32s14.933333 32 32 32h296.533333L725.333333 635.733333c-12.8 12.8-12.8 32 0 44.8 6.4 6.4 14.933333 8.533333 23.466667 8.533334s17.066667-2.133333 23.466667-8.533334l149.333333-149.333333c8.533333-8.533333 8.533333-29.866667-2.133333-42.666667z" fill="#666666" p-id="3374"></path><path d="M832 714.666667c-17.066667 0-32 14.933333-32 32v106.666666c0 6.4-4.266667 10.666667-10.666667 10.666667H234.666667c-6.4 0-10.666667-4.266667-10.666667-10.666667V170.666667c0-6.4 4.266667-10.666667 10.666667-10.666667h554.666666c6.4 0 10.666667 4.266667 10.666667 10.666667v106.666666c0 17.066667 14.933333 32 32 32s32-14.933333 32-32V170.666667c0-40.533333-34.133333-74.666667-74.666667-74.666667H234.666667C194.133333 96 160 130.133333 160 170.666667v682.666666c0 40.533333 34.133333 74.666667 74.666667 74.666667h554.666666c40.533333 0 74.666667-34.133333 74.666667-74.666667v-106.666666c0-17.066667-14.933333-32-32-32z" fill="#666666" p-id="3375"></path></svg>`;
const UplodIcon = `<svg t="1706534178637" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3908" width="200" height="200"><path d="M896 629.333333c-17.066667 0-32 14.933333-32 32v170.666667c0 6.4-4.266667 10.666667-10.666667 10.666667H170.666667c-6.4 0-10.666667-4.266667-10.666667-10.666667v-170.666667c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v170.666667c0 40.533333 34.133333 74.666667 74.666667 74.666667h682.666666c40.533333 0 74.666667-34.133333 74.666667-74.666667v-170.666667c0-17.066667-14.933333-32-32-32z" fill="#2c2c2c" p-id="3909"></path><path d="M322.133333 407.466667l157.866667-157.866667V704c0 17.066667 14.933333 32 32 32s32-14.933333 32-32V247.466667l157.866667 157.866666c6.4 6.4 14.933333 8.533333 23.466666 8.533334s17.066667-2.133333 23.466667-8.533334c12.8-12.8 12.8-32 0-44.8l-213.333333-213.333333c-12.8-12.8-32-12.8-44.8 0l-213.333334 213.333333c-12.8 12.8-12.8 32 0 44.8 10.666667 12.8 32 12.8 44.8 2.133334z" fill="#2c2c2c" p-id="3910"></path></svg>`;
const renderIcon = (icon) => {
  return () => {
    return h(NIcon, null,()=> svgParseVDomNode(icon));
  };
};
const options = ref([
  {
    label: "用户信息",
    key: "profile",
    icon: renderIcon(UserIcon),
  },  {
    label: "上传信息",
    key: "upload",
    icon: renderIcon(UplodIcon),
  },
  {
    label: "退出登录",
    key: "LogOut",
    icon: renderIcon(LogoutIcon),
  }
]);
const handleSelect = (key)=> {
    if(String(key)=="profile"){
      router.push("/center");
    }else if(String(key)=="upload"){
      router.push("/center/upload");
    }else{
      localStorage.removeItem("token");
      router.push("/");
    }
}
</script>
<style scoped>
.logo {
  margin-left: 70px;
  width: 65%;
  display: flex;
}

.right {
  display: flex;
  width: 35%;
  margin: 0 auto;
  justify-content: flex-end;
  align-items: center;
}

.name {
  font-size: 1.5em;
  margin-top: 15px;
}

div#header {
  display: flex;
  height: 100%;
  width: 100%;
  font-family: "SY";
}

.n-card {
  height: 12vh;
  width: 100vw;
  --n-padding-left: 0px !important;
}

.n-button {
  --n-height: 45px !important;
  --n-font-size: 1.5em !important;
  --n-border: 0px !important;
  --n-border-hover: 1px solid rgb(193, 193, 193) !important;
  --n-border-pressed: 1px solid rgb(193, 193, 193) !important;
  --n-border-focus: 1px solid rgb(193, 193, 193) !important;
  --n-text-color-hover: rgb(184, 184, 184) !important;
  --n-text-color-pressed: rgb(184, 184, 184) !important;
  --n-text-color-focus: rgb(184, 184, 184) !important;
  margin-right: 30px;
}
</style>
